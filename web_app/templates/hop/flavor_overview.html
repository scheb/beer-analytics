{% extends 'base.html' %}
{% load web_app %}

{% block content %}
    <nav aria-label="breadcrumb" class="mt-3">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{% url "hop_overview" %}">Hops</a></li>
            <li class="breadcrumb-item active">Hop Flavors and Aromas</li>
        </ol>
    </nav>

    <section class="detail-head clearfix">
        <h1>Hop Flavors and Aromas</h1>

        <nav class="toc toc-align">
            <h2 class="toc-headline">Table of Contents</h2>
            <ol>
                <li class="d-lg-none"><a href="#profile" data-interaction="Hop Flavors:Click TOC:$label">Profile</a></li>
                {% for category in categories %}
                    <li><a href="#flavor-{{ category.id }}" data-interaction="Hop Flavors:Click TOC:$label">{{ category.name }}{% if category.id != 'other' %} Flavors{% endif %}</a>
                {% endfor %}
            </ol>
        </nav>

        <h2 class="d-lg-none">
            <a href="#profile" id="introduction" class="anchor"><span></span></a>
            Profile
        </h2>
        {% include "./descriptions/flavors.html" %}
    </section>

    {% for category in categories %}
        <section class="flavor-category">
            <h2>
                <a href="#flavor-{{ category.id }}" id="flavor-{{ category.id }}" class="anchor"><span></span></a>
                {{ category.name }}{% if category.id != 'other' %} Flavors{% endif %}
            </h2>
            {% if category.description %}
                <div class="flavor-category-description">
                    {% include category.description %}
                </div>
            {% endif %}

            <table class="table flavor-table">
                <colgroup>
                    <col style="width:15%" />
                    <col style="width:15%" />
                    <col style="width:70%" />
                </colgroup>
                <thead class="table-light">
                    <tr>
                        <th>Descriptor</th>
                        <th class="text-nowrap"># Hops</th>
                        <th>Examples</th>
                    </tr>
                </thead>
                <tbody>
                    {% for tag in category.tags %}
                    <tr>
                        <td class="badge-list"><a href="{% url "hop_flavor_detail" tag.id %}" class="badge bg-{{ tag.category }}">{{ tag.name }}</a></td>
                        <td>{{ tag.accessible_hops_count }}</td>
                        <td>{% for hop in tag.most_popular_hops %}{% if not forloop.first %}, {% endif %}<a href="{{ hop|url }}">{{ hop.name }}</a>{% endfor %}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </section>
    {% endfor %}
{% endblock %}

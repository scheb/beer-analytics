{% extends 'base.html' %}
{% load web_app %}

{% block title %}Home{% endblock %}

{% block content %}
    <h1 class="home">Welcome to Beer Analytics <sup class="text-muted">Alpha</sup></h1>
    <h2 class="home">The analytical beer recipe database</h2>

    <p class="mb-5">
        Explore how certain <strong><a href="{% url "style_overview" %}">beer styles</a> are typically composed</strong>
        and <strong>discover trends in home/craft beer brewing</strong>.
        Or just browse the index of <a href="{% url "fermentable_overview" %}">fermentables</a>,
        <a href="{% url "fermentable_category" "grain" %}">malts</a>, <a href="{% url "hop_overview" %}">hops</a> and
        <a href="{% url "yeast_overview" %}">yeasts</a>.
    </p>

    <h2>Trends in Homebrewing</h2>

    <h3>Trending Hops</h3>
    <p>
        <a href="{{ "sabro"|hop|url }}">Sabro</a> (aka HBC 438) is the trending hop of 2020.
        <a href="{{ "strata"|hop|url }}">Strata</a> is also showing potential this year.
        <a href="{{ "idaho-7"|hop|url }}">Idaho 7</a> and <a href="{{ "cashmere"|hop|url }}">Cashmere</a> have been
        popular last year, but it seems the trend has reached it's peak.
    </p>
    <div id="chart-increasing-popularity-hops" class="chart-m">
        <noscript>
            <img src="{% url "trend_chart" "increasing-popularity-hops" "svg" %}" alt="Trending hops, popularity currently increasing"/>
        </noscript>
    </div>
    <p class="mt-3">
        <a href="{{ "el-dorado"|hop|url }}">El Dorado</a>, <a href="{{ "azacca"|hop|url }}">Azacca</a> and
        <a href="{{ "lemondrop"|hop|url }}">Lemondrop</a> have been trending since 2017, but their popularity is now
        plateauing.
    </p>
    <div id="chart-plateauing-popularity-hops" class="chart-m">
        <noscript>
            <img src="{% url "trend_chart" "plateauing-popularity-hops" "svg" %}" alt="Previously trending hops, popularity currently plateauing"/>
        </noscript>
    </div>

    <h3>All-time Favourite Hops</h3>
    <p>
        While usage of <a href="{{ "cascade"|hop|url }}">Cascade</a> has decreased over the last years, it is still
        brewer's favourite hop. Citra is defending a strong second place.
    <p>
    <p>
        There's a whole group of popular hops underneath. Most notably, <a href="{{ "amarillo"|hop|url }}">Amarillo</a>
        and specifically <a href="{{ "mosaic"|hop|url }}">Mosaic</a> have grown over the last years from nothing to
        some of the most used hop kinds.
    </p>

    <div id="chart-favourite-hops" class="chart-m">
        <noscript>
            <img src="{% url "trend_chart" "favourite-hops" "svg" %}" alt="All-time favourite hops"/>
        </noscript>
    </div>

    <h3>Trending Beer Styles</h3>

    <p class="mt-3">
        The fall/winter brewing season is starting! People are brewing more
        <a href="{{ "20"|style|url }}">Porter and Stouts</a> and they're mashing in seasonal
        <a href="{{ "30"|style|url }}">spiced beers</a>.
    </p>
    <div id="chart-winter-styles" class="chart-m">
        <noscript>
            <img src="{% url "trend_chart" "winter-styles" "svg" %}" alt="Trending winter beer styles"/>
        </noscript>
    </div>

    <p>
        In general, there's not much movement on the popularity of beer styles.
        <a href="{{ "02A"|style|url }}">International Pale Lager</a> and <a href="{{ "12C"|style|url }}">English IPA</a>
        are growing slightly.
    </p>
    <div id="chart-trending-styles" class="chart-m">
        <noscript>
            <img src="{% url "trend_chart" "trending-styles" "svg" %}" alt="Trending beer styles"/>
        </noscript>
    </div>

    <h3>Fermentables</h3>
    <p>People are brewing less and less with <a href="{{ "malt-extract"|fermentable|url }}">malt extract</a> and are switching to all-grain instead.</p>
    <div id="chart-malt-extract" class="chart-m">
        <noscript>
            {{ "malt-extract"|fermentable|chart_image:"popularity"|safe }}
        </noscript>
    </div>

{% endblock %}

{% block script %}
<script>
window.addEventListener('load', function ()
{
    display_graph('chart-trending-styles', '{% url "trend_chart" "trending-styles" "json" %}');
    display_graph('chart-winter-styles', '{% url "trend_chart" "winter-styles" "json" %}');

    display_graph('chart-increasing-popularity-hops', '{% url "trend_chart" "increasing-popularity-hops" "json" %}');
    display_graph('chart-plateauing-popularity-hops', '{% url "trend_chart" "plateauing-popularity-hops" "json" %}');
    display_graph('chart-favourite-hops', '{% url "trend_chart" "favourite-hops" "json" %}');

    display_graph('chart-malt-extract', '{{ "malt-extract"|fermentable|chart_js:"popularity" }}');
});
</script>
{% endblock %}
